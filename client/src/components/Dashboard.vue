<template>
  <div class="container">
    
    <!-- Disconnected -->
    <div class="offline" v-if="!sharedState.isConnected">
      <h1>Offline</h1>
      <h2>My apologies, but the server is not currently accessible. Is it running properly?</h2>
    </div>

    <div class="online" v-if="sharedState.isConnected">

      <div class="refiners">
        <form action="none">
          <input type="text" placeholder="🔍 Filter Containers" v-model="query">
        </form>
      </div>

      <div class="nodes">
        <div
          v-bind:title="node.Spec.Role + ' - ' + node.Spec.Availability"
          v-bind:key="node.Id"
          v-for="node in filteredNodes"
          v-bind:class="[   {active: node.Spec.Availability == 'active'},
                            {pause: node.Spec.Availability == 'pause'},
                            {drain: node.Spec.Availability == 'drain'}]"
        >
          <div class="header">
            <h1>
              {{node.Description.Hostname}}
              <span class="os">
                <svg
                  v-if="node.Description.Platform.OS == 'linux'"
                  xmlns="http://www.w3.org/2000/svg"
                  preserveAspectRatio="xMidYMid meet"
                  class
                  viewBox="0 0 24 24"
                >
                  <title>{{node.Description.Platform.OS | capitalize}} ({{node.Description.Platform.Architecture}}) - {{node.Description.Engine.EngineVersion}}</title>
                  <g>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                    <path
                      d="M12.4 2.003c-.123 0-.253.005-.388.016C8.6 2.3 9.504 6.03 9.454 7.28c-.063.914-.242 1.633-.85 2.526-.712.878-1.717 2.298-2.192 3.777-.225.697-.332 1.41-.233 2.082-.033.028-.06.058-.09.09-.21.23-.365.51-.537.7-.16.166-.39.23-.643.323-.25.092-.528.23-.697.564v.002c-.153.294-.108.633-.06.947.045.314.093.61.03.81-.2.567-.225.957-.085 1.24.14.284.43.41.758.48.655.14 1.542.107 2.24.49l.06-.117-.058.117c.748.405 1.506.55 2.11.406.44-.104.796-.374.98-.79.473-.002.992-.21 1.824-.257.564-.047 1.27.207 2.08.16a1.188 1.188 0 0 0 .096.265c.314.65.898.948 1.52.897.624-.05 1.287-.43 1.823-1.09l-.096-.086.1.084c.51-.64 1.357-.905 1.92-1.255.28-.176.508-.395.525-.714.017-.317-.164-.674-.58-1.152-.137-.16-.2-.456-.27-.77-.07-.316-.15-.656-.4-.877a.992.992 0 0 0-.31-.19c.35-1.068.21-2.13-.14-3.09-.43-1.178-1.182-2.204-1.756-2.907-.643-.838-1.272-1.635-1.26-2.81.02-1.796.192-5.125-2.862-5.13H12.4zm.414 2.765c.173 0 .32.053.473.167.155.116.266.26.356.464.09.2.137.416.136.635a1.55 1.55 0 0 1-.3.94 5.77 5.77 0 0 0-.484-.197.69.69 0 0 0 .102-.182.992.992 0 0 0 .07-.348v-.016a.996.996 0 0 0-.048-.338.627.627 0 0 0-.15-.263.303.303 0 0 0-.215-.1h-.01a.31.31 0 0 0-.21.086.62.62 0 0 0-.17.25.99.99 0 0 0-.07.35v.014c-.002.07.003.136.013.2-.155-.08-.3-.135-.438-.168a1.82 1.82 0 0 1-.014-.19v-.02c-.006-.22.036-.438.123-.64a1.13 1.13 0 0 1 .347-.47.75.75 0 0 1 .478-.176h.008v.002zm-2.372.194c.115 0 .218.04.325.128.123.105.217.24.275.39.073.17.112.343.123.546.005.08.005.163-.002.244-.14.043-.274.107-.395.19.01-.07.01-.142.004-.213v-.012a.96.96 0 0 0-.067-.275.532.532 0 0 0-.134-.202.215.215 0 0 0-.162-.064c-.058.005-.106.035-.152.092a.54.54 0 0 0-.097.223.925.925 0 0 0-.02.292v.012c.01.103.03.19.067.276a.525.525 0 0 0 .16.225c-.043.035-.086.07-.13.102l-.107.08a1.013 1.013 0 0 1-.224-.342 1.578 1.578 0 0 1-.123-.546v-.004a1.58 1.58 0 0 1 .062-.557c.04-.157.12-.3.23-.42a.49.49 0 0 1 .367-.17v.002zm1.08 1.407c.266-.003.588.087.977.346.237.16.423.174.852.364v.002c.207.087.328.2.387.32.06.12.06.252.01.39-.1.272-.415.56-.858.704-.217.073-.405.233-.628.365-.222.133-.473.24-.815.22a.99.99 0 0 1-.623-.25c-.157-.133-.295-.297-.495-.42-.325-.19-.5-.407-.556-.597a.413.413 0 0 1 .157-.475c.18-.14.305-.235.39-.298.08-.064.116-.088.142-.114.136-.133.352-.375.678-.49a1.11 1.11 0 0 1 .377-.067h.002zm1.867 1.14c-.117.008-.238.07-.378.15-.14.08-.3.186-.47.288-.343.203-.738.4-1.13.4-.392 0-.706-.19-.94-.38-.12-.098-.216-.195-.294-.27a1.52 1.52 0 0 0-.104-.095c-.032-.025-.057-.05-.11-.05l-.002.115c-.004.038-.008.037-.007.038.003 0 .015.006.03.017.022.018.054.048.092.085.076.074.177.175.3.277.25.204.596.413 1.033.413.44 0 .853-.212 1.203-.42.174-.105.333-.21.468-.287.136-.076.25-.125.315-.13l-.01-.15h.004zm.39.543c.29 1.187.966 2.902 1.4 3.738.233.445.693 1.388.89 2.525.128-.004.266.015.415.054.52-1.395-.44-2.897-.88-3.315-.178-.178-.186-.257-.098-.254.476.437 1.102 1.314 1.33 2.304.104.45.126.926.014 1.394.056.022.11.048.167.075.835.42 1.143.786.995 1.285h-.158c.12-.396-.147-.687-.86-1.02-.74-.338-1.33-.304-1.43.38l-.015.108a1.15 1.15 0 0 0-.166.076c-.348.197-.537.554-.643.99-.104.44-.134.967-.163 1.56v.002c-.018.3-.137.703-.257 1.13-1.21.895-2.893 1.282-4.322.274-.1-.16-.208-.318-.322-.47-.073-.1-.148-.197-.222-.294.146 0 .27-.025.372-.072a.48.48 0 0 0 .257-.274c.087-.242 0-.584-.28-.974-.278-.39-.75-.83-1.444-1.27-.51-.33-.797-.73-.93-1.167-.134-.438-.115-.91-.01-1.376.195-.893.702-1.763 1.026-2.31.087-.065.03.124-.328.813-.322.63-.923 2.083-.1 3.218.022-.806.208-1.63.52-2.4.457-1.07 1.41-2.923 1.486-4.4.04.03.174.123.233.158.175.108.306.263.476.405.17.142.384.264.706.283.315.016.628-.066.895-.236.234-.14.42-.292.598-.352.376-.12.674-.336.843-.586h.003zm2.377 6.796c.152 0 .335.05.536.143.542.26.71.48.563.806-.124.245-.657.635-1.023.532-.372-.1-.554-.655-.494-1.075.032-.285.19-.407.417-.408zm-.613.766c.03.514.277 1.038.71 1.15.476.13 1.162-.29 1.45-.636.06 0 .115-.004.17-.005.254-.007.467.008.685.205v.002c.167.146.247.423.316.733.07.31.124.648.33.89.398.456.526.764.515.96-.01.198-.147.344-.402.502-.51.318-1.41.593-1.986 1.314-.5.618-1.11.955-1.645 1-.538.043-1-.187-1.274-.754v-.003c-.17-.333-.1-.86.043-1.413.14-.556.346-1.125.374-1.588v-.002c.03-.593.06-1.11.157-1.51.098-.4.25-.67.518-.823a.997.997 0 0 1 .037-.02h.002zm-8.726.04c.04 0 .082.003.127.01.304.047.57.267.825.626.255.358.493.848.738 1.39v.002c.197.424.61.89.962 1.366.352.477.624.954.588 1.32v.003c-.046.623-.386.963-.908 1.086-.52.12-1.23 0-1.935-.383-.782-.43-1.712-.386-2.308-.515-.3-.065-.494-.162-.583-.342-.09-.18-.092-.493.098-1.028v-.002l.002-.003c.094-.3.024-.627-.02-.935-.047-.307-.07-.587.032-.782v-.002c.13-.26.32-.352.558-.44.236-.087.517-.156.74-.386v-.003c.206-.225.36-.505.54-.704.152-.168.304-.28.533-.28h.01z"
                    ></path>
                  </g>
                </svg>
                <svg
                  v-if="node.Description.Platform.OS == 'windows'"
                  xmlns="http://www.w3.org/2000/svg"
                  preserveAspectRatio="xMidYMid meet"
                  class
                  viewBox="0 0 24 24"
                >
                  <title>{{node.Description.Platform.OS | capitalize}} ({{node.Description.Platform.Architecture}}) - {{node.Description.Engine.EngineVersion}}</title>
                  <g>
                    <path fill="none" d="M0 0h24v24H0V0z"></path>
                    <path
                      d="M5 11.674h5.632V6.137L5 6.927v4.747zm0 5.396l5.632.787v-5.474H5v4.687zm6.255-11.02v5.624h7.494V5l-7.496 1.05zm0 11.894l7.494 1.05v-6.61h-7.496v5.56z"
                    ></path>
                  </g>
                </svg>
              </span>
              
              <span class="orchestrator">
                <svg
                  v-if="node.Spec.Labels['com.docker.ucp.orchestrator.swarm'] == 'true'"
                  class="orchestrator-swarm"
                  xmlns="http://www.w3.org/2000/svg"
                  preserveAspectRatio="xMidYMid meet"
                  viewBox="0 0 18 18"
                >
                  <title>Swarm</title>
                  <g id="Swarm">
                    <path
                      d="M16,6.84615385 L14.4090909,4.15384615 L11.8636364,4.15384615 L10.5909091,2 L7.40909091,2 L6.13636364,4.15384615 L3.59090909,4.15384615 L2,6.84615385 L3.27272727,9 L2,11.1538462 L3.59090909,13.8461538 L6.13636364,13.8461538 L7.40909091,16 L10.5909091,16 L11.8636364,13.8461538 L14.4090909,13.8461538 L16,11.1538462 L14.7272727,9 L16,6.84615385 Z M14.8333333,6.84615385 L13.8787879,8.46153846 L11.8636364,8.46153846 L10.9090909,6.84615385 L11.8636364,5.23076923 L13.8787879,5.23076923 L14.8333333,6.84615385 Z M9.95454545,10.6153846 L8.04545455,10.6153846 L7.09090909,9 L8.04545455,7.38461538 L9.95454545,7.38461538 L10.9090909,9 L9.95454545,10.6153846 Z M8.04545455,3.07692308 L10.0606061,3.07692308 L11.0151515,4.69230769 L9.95454545,6.30769231 L8.04545455,6.30769231 L7.09090909,4.69230769 L8.04545455,3.07692308 Z M4.12121212,5.23076923 L6.13636364,5.23076923 L7.09090909,6.84615385 L6.13636364,8.46153846 L4.12121212,8.46153846 L3.16666667,6.84615385 L4.12121212,5.23076923 Z M3.16666667,11.1538462 L4.12121212,9.53846154 L6.13636364,9.53846154 L7.09090909,11.1538462 L6.13636364,12.7692308 L4.12121212,12.7692308 L3.16666667,11.1538462 Z M9.95454545,14.9230769 L8.04545455,14.9230769 L7.09090909,13.3076923 L8.04545455,11.6923077 L9.95454545,11.6923077 L10.9090909,13.3076923 L9.95454545,14.9230769 Z M13.8787879,12.7692308 L11.8636364,12.7692308 L10.9090909,11.1538462 L11.8636364,9.53846154 L13.8787879,9.53846154 L14.8333333,11.1538462 L13.8787879,12.7692308 Z"
                      fill="#099CEC"
                    ></path>
                  </g>
                </svg>
                <svg
                  v-if="node.Spec.Labels['com.docker.ucp.orchestrator.kubernetes'] == 'true'"
                  class="orchestrator-kubernetes"
                  xmlns="http://www.w3.org/2000/svg"
                  preserveAspectRatio="xMidYMid meet"
                  viewBox="0 0 18 18"
                >
                  <title>Kubernetes</title>
                  <g id="Kubernetes">
                    <path
                      d="M8.95008465,2.02169795 C8.82669831,2.02810437 8.70580588,2.05963593 8.59449955,2.11444284 L3.74228324,4.50406272 C3.48788151,4.62928766 3.30310112,4.86611856 3.24024423,5.14752032 L2.04316976,10.5152104 C1.98732344,10.7650692 2.03276429,11.0273967 2.16914494,11.2424582 C2.18551308,11.2684809 2.20311687,11.2936694 2.22189316,11.3179333 L5.5804038,15.6219355 C5.75650512,15.8475383 6.02350828,15.9789001 6.30584707,15.9788434 L11.6917513,15.9775642 C11.9739845,15.9777762 12.2409688,15.846659 12.4171946,15.6212959 L15.7744641,11.3166541 C15.9506596,11.0909382 16.0166745,10.7954632 15.9538081,10.5139311 L14.7548719,5.14624108 C14.692015,4.86483932 14.5072346,4.62800842 14.2528329,4.50278348 L9.399996,2.11444284 C9.2599894,2.0455001 9.10528626,2.01360954 8.95008465,2.02169795 Z"
                      id="path3055"
                      fill="#326CE5"
                      fill-rule="nonzero"
                    ></path>
                    <path
                      d="M8.99816443,3.84839339 C8.8377709,3.84841018 8.70771983,3.99731553 8.7077389,4.18099573 C8.70773909,4.18381477 8.7082989,4.18650854 8.70835847,4.18931079 C8.70812216,4.21426845 8.70695251,4.2443357 8.7077389,4.26606518 C8.71156397,4.3720067 8.73396953,4.45308982 8.74745521,4.55069602 C8.7718863,4.75960427 8.79235787,4.93277649 8.77972471,5.0937333 C8.76743867,5.15442863 8.72406468,5.2099376 8.68539847,5.24852132 L8.67857223,5.37516605 C8.50428077,5.39004965 8.32882343,5.41730401 8.15357223,5.45831664 C7.3994665,5.63479401 6.75019475,6.0351631 6.25587719,6.57573257 C6.2238019,6.55317845 6.16768653,6.51168585 6.15100031,6.49897819 C6.09914729,6.50619556 6.04674082,6.52268588 5.97848258,6.48170845 C5.84851274,6.39153474 5.73013907,6.26706368 5.58690457,6.11712512 C5.52127376,6.04540193 5.47374644,5.97710444 5.39576982,5.90796942 C5.3780619,5.89226915 5.35103773,5.87103418 5.33123081,5.85488096 C5.27026865,5.8047845 5.19836585,5.77865833 5.12892585,5.77620772 C5.03964576,5.7730569 4.95369867,5.80903506 4.89745421,5.881745 C4.79746423,6.01100716 4.82947736,6.20857643 4.96881946,6.32308272 C4.97023336,6.32424325 4.97173901,6.32514547 4.97316343,6.32628082 C4.99231107,6.34227889 5.01575838,6.36277763 5.03335847,6.37617117 C5.11610482,6.43914149 5.19169152,6.47137629 5.27413861,6.52136488 C5.4478379,6.63192825 5.59183674,6.72360471 5.70605351,6.83413901 C5.75065532,6.88314249 5.75845084,6.96949117 5.76438684,7.00683637 L5.85747194,7.09254544 C5.3591629,7.86548626 5.12854139,8.82022444 5.26483109,9.79302058 L5.14319989,9.82947892 C5.11114287,9.87214637 5.06584423,9.93928354 5.01846485,9.95932175 C4.86902965,10.0078348 4.70084874,10.0256496 4.49780882,10.0475893 C4.40248352,10.055759 4.32023362,10.0508836 4.21917407,10.0706156 C4.19693135,10.0749585 4.16593992,10.0832805 4.14160315,10.0891646 C4.14075719,10.0893488 4.13996684,10.0896067 4.13912088,10.0898032 C4.13779436,10.0901204 4.1360516,10.0907836 4.13477691,10.0910824 C3.96359682,10.1337126 3.8536303,10.2958836 3.88903223,10.4556658 C3.9244425,10.6154854 4.09164777,10.7126757 4.26385492,10.6744158 C4.26509804,10.6741231 4.26690315,10.6740739 4.2681989,10.6737772 C4.27014301,10.6733187 4.27185458,10.6723465 4.273784,10.6718593 C4.29778953,10.666428 4.32787305,10.6603851 4.34887265,10.6545896 C4.44822976,10.6271703 4.52018777,10.5868828 4.60951095,10.5516108 C4.80167714,10.4805716 4.96083609,10.4212262 5.11589393,10.398102 C5.18065495,10.3928741 5.24888619,10.4392866 5.28282655,10.4588659 L5.4094223,10.4364792 C5.70074502,11.3674141 6.31126377,12.1198568 7.08433365,12.5919982 L7.03158542,12.7224807 C7.05059802,12.7731472 7.07156803,12.8416997 7.05740539,12.8917358 C7.00103444,13.0424036 6.90447833,13.201434 6.79452868,13.3787307 C6.74129194,13.4606413 6.68680752,13.5242081 6.63876627,13.6179485 C6.62727038,13.640379 6.61262936,13.6748352 6.60153223,13.6985406 C6.5268886,13.8631503 6.58164151,14.0527406 6.72502514,14.1238878 C6.86930953,14.1954819 7.04840468,14.1199715 7.12591166,13.9550282 C7.12603081,13.9547949 7.12642202,13.9546229 7.12653124,13.9543896 C7.12661067,13.9542054 7.1264518,13.9539291 7.12653124,13.953751 C7.13757098,13.9303655 7.15321126,13.8996265 7.16252414,13.8776362 C7.20367282,13.780475 7.21736463,13.697211 7.24630074,13.6032393 C7.32314426,13.4042891 7.36536369,13.1955399 7.4711463,13.0654651 C7.50011299,13.0298464 7.54733827,13.0161479 7.59630074,13.0026362 L7.66208088,12.8798292 C8.33603175,13.1464596 9.09041172,13.2180082 9.84399577,13.041653 C10.0159072,13.0014221 10.1818712,12.9493544 10.3423114,12.886865 C10.3607989,12.9206642 10.3951565,12.9856367 10.4043681,13.0019966 C10.4541245,13.0186816 10.5084336,13.0272977 10.5526837,13.0947415 C10.6318262,13.2341066 10.6859498,13.3989787 10.7518858,13.5981223 C10.7808267,13.6920924 10.7951294,13.7753601 10.836283,13.8725193 C10.8456628,13.8946644 10.8612249,13.9258351 10.8722759,13.9492737 C10.9496199,14.1147528 11.1292826,14.1905213 11.273783,14.1187729 C11.417149,14.0475878 11.4719622,13.8580147 11.3972759,13.6934257 C11.3861774,13.6697211 11.3709182,13.6352635 11.3594213,13.6128336 C11.3113753,13.5190958 11.2568996,13.456163 11.2036589,13.3742554 C11.0937001,13.1969646 11.0025021,13.0496826 10.9461234,12.8990178 C10.9225496,12.8213102 10.9501006,12.7729822 10.9684639,12.7224827 C10.9574668,12.7094904 10.9339343,12.6361066 10.9200596,12.6015946 C11.723469,12.1126556 12.3160594,11.332153 12.5943504,10.4307247 C12.63193,10.4368122 12.6972462,10.4487233 12.7184639,10.4531114 C12.7621427,10.4234187 12.8023038,10.3846768 12.8810525,10.3910682 C13.0361113,10.414184 13.1952657,10.4735481 13.3874355,10.544577 C13.4767605,10.5798443 13.5487155,10.6207814 13.6480738,10.6481954 C13.6690736,10.6539897 13.6991565,10.6593954 13.7231624,10.6648256 C13.7250927,10.6653127 13.7268024,10.666287 13.7287475,10.6667434 C13.7300443,10.6670422 13.7318484,10.6670893 13.7330915,10.667382 C13.9053086,10.7055944 14.0725437,10.608461 14.1079142,10.448632 C14.1432764,10.2888404 14.0333607,10.1266318 13.8621695,10.0840487 C13.8372688,10.0782127 13.8019546,10.0683011 13.7777724,10.0635808 C13.6767118,10.0438543 13.5944633,10.0487191 13.4991376,10.0405545 C13.2960967,10.0186257 13.1279192,10.0007918 12.9784816,9.95228696 C12.9175516,9.9279245 12.8742058,9.85319725 12.853126,9.82244412 L12.7358388,9.78726503 C12.7966496,9.33381199 12.7802525,8.86188673 12.6750232,8.38969558 C12.568814,7.91310795 12.3811151,7.47722225 12.1307856,7.09318608 C12.1608717,7.06499594 12.2176886,7.01313822 12.2337997,6.99788272 C12.2385093,6.94417164 12.234463,6.88785725 12.2884097,6.82838345 C12.4026207,6.71784301 12.546631,6.62618211 12.7203246,6.51560933 C12.8027691,6.46561623 12.8789821,6.43339044 12.9617253,6.37041561 C12.9804366,6.35617491 13.0059871,6.33362284 13.0256437,6.31732716 C13.1649562,6.2027824 13.1970311,6.005225 13.097009,5.87598944 C12.9969868,5.74675389 12.8031654,5.73458064 12.6638529,5.84912541 C12.6440234,5.8653124 12.6171162,5.88642845 12.5993139,5.90221386 C12.5213409,5.97135339 12.4731858,6.03964289 12.4075586,6.11136956 C12.2643319,6.26131591 12.1459459,6.38641164 12.0159806,6.47659251 C11.9596627,6.51038614 11.8771729,6.49869327 11.8397385,6.49642073 L11.7292775,6.57765246 C11.0994006,5.89688056 10.2418091,5.46163427 9.31837719,5.37708491 C9.31579444,5.33719883 9.31241081,5.2651019 9.31155095,5.24340436 C9.27374678,5.20611912 9.22807878,5.17428734 9.21660414,5.0937333 C9.20397098,4.93277649 9.22506312,4.75960427 9.24949421,4.55069602 C9.26297989,4.45308982 9.28538545,4.3720067 9.28921053,4.26606518 C9.29008031,4.24198211 9.28868429,4.20703573 9.28859095,4.18099573 C9.28857189,3.99731553 9.15855895,3.84837661 8.99816542,3.84839339 L8.99816443,3.84839339 Z M8.63451194,6.17021357 L8.54825308,7.74048038 L8.54204741,7.74367848 C8.53626193,7.8841564 8.42409075,7.99632833 8.28637365,7.99632833 C8.2299604,7.99632833 8.17788973,7.97765573 8.13557577,7.94579836 L8.13309351,7.9470776 L6.88389138,7.03434003 C7.26782202,6.64522292 7.75889952,6.35766538 8.32484882,6.22522088 C8.42823019,6.20102728 8.53156548,6.18307556 8.63451194,6.17021357 Z M9.36243748,6.17021357 C10.0231872,6.2539745 10.6342533,6.56235316 11.1025084,7.03497965 L9.86137365,7.94196064 L9.85702968,7.94004281 C9.74686755,8.02297213 9.5916566,8.00239582 9.50578854,7.8914317 C9.47061339,7.84597345 9.45215722,7.79252313 9.44993748,7.73856254 L9.44869634,7.73792395 L9.36243748,6.17021357 Z M6.43087719,7.62087146 L7.57148003,8.67240655 L7.5702389,8.67880275 C7.67319092,8.77105067 7.68837268,8.93112901 7.6025084,9.04210684 C7.56733563,9.08756693 7.52025433,9.11805766 7.46970698,9.13229325 L7.46846585,9.1374102 L6.00640911,9.57235173 C5.93199504,8.87101784 6.09236613,8.18926553 6.43087719,7.62087146 Z M11.5573843,7.62151006 C11.7268558,7.90463263 11.8551881,8.22085211 11.9315864,8.56367015 C12.0070685,8.90237763 12.0260117,9.24047947 11.9948843,9.56723374 L10.5253807,9.13101298 L10.5241396,9.12461678 C10.3925495,9.08754871 10.3116786,8.94958363 10.3423134,8.81120304 C10.3548643,8.75451491 10.3840596,8.70655836 10.4236077,8.67112629 L10.4229881,8.66792819 L11.5573853,7.62151006 L11.5573843,7.62151006 Z M8.76421053,8.75363725 L9.23149776,8.75363725 L9.52192329,9.12781488 L9.41766797,9.5947374 L8.99816443,9.80261386 L8.57741975,9.59409778 L8.47316443,9.12717526 L8.76421053,8.75363725 Z M10.2622602,10.0341563 C10.2821177,10.0331226 10.3018887,10.0349668 10.3212141,10.0386336 L10.3236963,10.0354355 L11.836019,10.2989589 C11.61469,10.9398703 11.1911689,11.4951029 10.6252921,11.8666672 L10.0382353,10.4051358 L10.0400961,10.4025773 C9.98616905,10.2734255 10.0401358,10.1219723 10.1642095,10.0603807 C10.1959756,10.044612 10.2291634,10.0358805 10.2622592,10.0341563 L10.2622602,10.0341563 Z M7.7222779,10.0405525 C7.83768834,10.0422206 7.94120653,10.1247827 7.96802258,10.2458704 C7.98057671,10.3025577 7.97446655,10.358725 7.95374953,10.4083339 L7.95809351,10.4140905 L7.37724244,11.8609106 C6.83417827,11.5017288 6.40162573,10.9639276 6.1702389,10.3040769 L7.66952968,10.0418327 L7.67201194,10.0450308 C7.68878236,10.0418499 7.70579067,10.040315 7.7222779,10.0405535 L7.7222779,10.0405525 Z M8.98885592,10.6744168 C9.02905776,10.672894 9.06985038,10.6813959 9.10862542,10.7006412 C9.15945257,10.7258684 9.19871651,10.7655895 9.22343038,10.8132143 L9.22901549,10.8132143 L9.96811124,12.1896763 C9.87219058,12.2228184 9.77357895,12.2511428 9.67272116,12.2747457 C9.10746809,12.4070273 8.54401098,12.3669466 8.03380273,12.1877574 L8.77103677,10.8138539 L8.7722779,10.8138539 C8.81651532,10.7286175 8.90041206,10.6777659 8.98885592,10.6744168 Z"
                      id="path3059"
                      fill="#FFFFFF"
                      fill-rule="nonzero"
                    ></path>
                  </g>
                </svg>
              </span>
            </h1>
          </div>

          <transition-group name="list" tag="ul" class="containers" appear>
            <li v-if="node.Containers.length === 0" class="empty" v-bind:key="5">
              <span>∅</span>
            </li>
            <li
              v-bind:key="container.Id"
              v-for="container in node.Containers"
              class="list-item"
              v-bind:class="[   {created: container.State == 'created'}, 
                                {dead: container.State == 'dead'},
                                {exited: container.State == 'exited'},
                                {paused: container.State == 'paused'},
                                {preparing: container.State == 'preparing'}, 
                                {restarting: container.State == 'restarting'}, 
                                {running: container.State == 'running'} ]"
            >
              <span class="repository">{{container | containerRepository}}</span>
              <h3 class="image" v-bind:title="container.Image">{{container | containerImage}}</h3>
              <div class="tag" v-bind:title="container.Status">
                <span>{{container.State}}</span>
                <span>{{container.Image | containerTag}}</span>
              </div>
            </li>
          </transition-group>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import store from "../store";

export default {
  name: "Dashboard",
  data() {
    return {
      sharedState: store.state,
      query: ""
    };
  },
  computed: {
    filteredNodes() {
      // Filter the containers inside of each node to match the query box value
      return this.sharedState.nodes.map(node => {
        node.Containers = node.Containers.filter(container => {
          // Check if each container containers the value
          if (
            container.Image.toLowerCase().indexOf(this.query.toLowerCase()) > -1
          ) {
            return true;
          }
        });
        return node;
      });
    }
    //sortedContainers() {
    //  return this.sharedState.nodes.map(node => {})
    //}
  }
};
</script>

<style lang="scss">
/* Colors */
$blue: #099cec;
$warning: #f5d000;
$success: #08ce76;
$danger: #ef4a53;

.container {
  border-top: 4px solid $blue;
  background-color: #f7f7f7;
  padding-top: 1em;
  height: 100%;
  width: 100%;

  .offline {
    width: 75%;
    margin: 40px auto;
  }
}

.refiners form {
  padding: 0.7em;
  text-align: left;
  display: flex;
  flex-direction: row;

  input[type="text"] {
    width: 12em;
    padding: 0.3em;
    font-size: 1.25em;
    background: transparent;
    border: 0;
    border-bottom: 1px solid #ccc;
    margin-right: 3em;

    &::placeholder {
      font-size: 0.8em;
    }
  }

  button {
    justify-content: center;
    line-height: 24px;
    min-height: 32px;
    max-height: 32px;
    white-space: nowrap;
    z-index: 1;
    align-items: center;
    color: rgb(9, 156, 236);
    cursor: pointer;
    display: flex;
    font-size: 13px;
    text-transform: capitalize;
    position: relative;
    margin: 0px;
    outline: none;
    padding: 3px 14px;
    border-width: 1px;
    border-style: solid;
    border-image: initial;
    transition: color 0.3s, border 0.3s ease-in-out;
    background: rgb(255, 255, 255);
    border-color: rgb(9, 156, 236);
    border-radius: 0px;
  }
}

.nodes {
  height: 90vh;
  display: flex;
  flex-direction: row;
  flex-grow: 2;
  align-items: stretch;
  flex-wrap: nowrap;
  overflow-x: auto;

  > div {
    flex: 0 0 auto;
  }

  .os {
    transform: translateY(5px);
    display: inline-block;
    margin: 0 5px 0 10px;

    svg {
      width: 25px;
    }
  }

  .orchestrator-swarm {
    height: 25px;
    position: relative;
    top: 5px;
    margin-right: 5px;
  }

  .orchestrator-kubernetes {
    height: 25px;
    position: relative;
    top: 5px;
  }

  .header {
    margin: 0.7em 0.7em 0;
    min-width: 12em;
    flex: 0 0 auto;
    box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    background-color: #fff;
    white-space: nowrap;

    h1 {
      color: $blue;
      font-size: 1em;
      padding-bottom: 0.75em;
      border-bottom: 2px solid #ddd;
      padding: 0.5em 1.2em;
      margin: 0;
    }
  }

  .containers {
    margin: 0 0.7em 0.7em;
    min-width: 12em;
    flex: 0 0 auto;
    box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.05);
    overflow-y: auto;
    height: 100%;
    background-color: #fff;

    &::-webkit-scrollbar {
      display: none;
    }
  }

  div ul {
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: 0;

    li {
      background: #fff;
      padding: 0.9em;
      border-bottom: 2px solid #ddd;
      display: inline-block;
    }

    li h3 {
      cursor: auto;
      margin: 0 auto;
      padding: 0.5em 0;
      font-size: 1.3em;
      max-width: 250px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    li span {
      cursor: auto;
      margin-bottom: 0.5em;
      word-break: break-all;
    }

    li span:first-child {
      margin-top: 0.5em;
    }

    li span:last-child {
      color: rgb(152, 109, 252);
      font-weight: 900;
    }

    li.empty {
      border: none;
    }
    li.empty span {
      color: #ddd;
      font-size: 2em;
    }

    .tag span:first-child::before {
      content: "";
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 12px;
      background-color: #ddd;
      margin-right: 10px;
    }

    .empty span:first-child::before {
      display: none;
    }

    li.running span:first-child::before {
      background-color: $success;
    }

    li.created span:first-child::before,
    li.preparing span:first-child::before {
      background-color: $blue;
    }

    li.paused span:first-child::before,
    li.restarting span:first-child::before {
      background-color: $warning;
    }

    li.exited span:first-child::before,
    li.dead span:first-child::before {
      background-color: $danger;
    }

    .tag span:last-child {
      margin-left: 0.8em;
    }
  }

  div {
    &.active .header {
      border-top: 5px solid $success;
    }

    &.pause .header {
      border-top: 5px solid $blue;
    }

    &.drain .header {
      border-top: 5px solid $warning;
    }
  }

  li {
    list-style: none;
    padding: 0;
    margin: 0;
  }
}

/* VueJS Animations */
.list-enter-active,
.list-leave-active {
  transition: all 0.3s ease;
}
.list-enter,
.list-leave-to {
  opacity: 0;
  transform: translateY(30px);
}
.list-move {
  transition: transform 1s;
}
.list-item {
  display: inline-block;
}
/* end VueJS Animations */
</style>
